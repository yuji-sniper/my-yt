# タスク分解コマンド

仕様書（プランファイル）を読み取り、実装タスクに分解します。

## 引数

- `$ARGUMENTS`: 仕様書のファイルパス（例: `.docs/plans/stripe-product-price-management.md`）

## 手順

1. 指定された仕様書ファイルを読み込み、以下を把握してください:
   - 機能の概要
   - 実装対象のユースケース一覧
   - DBスキーマ
   - ファイル構成
   - 依存関係

2. 仕様書のファイル名から、タスクを格納するディレクトリ名を決定してください:
   - 例: `stripe-product-price-management.md` → `.docs/tasks/stripe-product-price-management/`

3. タスクを以下の基準で分解してください:

### バックエンド

- **共通基盤タスク**: DBスキーマ、ドメインエンティティ、リポジトリをまとめて1タスク
- **ユースケース単位**: 各ユースケース（Command/Query）ごとに1タスク
  - Port、Adapter、UseCase、Handler、Action、DI設定を含む

### フロントエンド

- **画面単位**: 各画面ごとに1タスク
  - ページコンポーネント、子コンポーネント、フォーム、状態管理を含む

4. 各タスクファイルに以下を記載してください:
   - 概要
   - 依存タスク（他のタスクファイル名）
   - 実装内容（作成/修正するファイル一覧と実装方針）
   - 完了条件（チェックリスト形式）
   - 参考（仕様書へのリンク）

5. タスクファイルの命名規則:
   - バックエンド: `backend-{連番3桁}-{ケバブケース名}.md`
   - フロントエンド: `frontend-{連番3桁}-{ケバブケース名}.md`
   - 例: `backend-001-common-foundation.md`, `frontend-001-product-list-page.md`

6. タスク一覧のインデックスファイル `README.md` を作成してください:
   - タスク依存関係図（ASCII図）
   - バックエンド/フロントエンド別のタスク一覧表
   - 推奨実装順序

## 出力先

```
.docs/tasks/{仕様書名}/
├── README.md                           # タスク一覧・依存関係図
├── backend-001-common-foundation.md    # 共通基盤
├── backend-002-xxx.md                  # ユースケース1
├── backend-003-xxx.md                  # ユースケース2
├── ...
├── frontend-001-xxx.md                 # 画面1
├── frontend-002-xxx.md                 # 画面2
└── ...
```

## 出力例

### タスクファイルの構成

```markdown
# タスク: {タスク名}

## 概要

{タスクの説明}

## 依存タスク

- `backend-001-common-foundation.md`

## 実装内容

### 1. {レイヤー/機能}

#### `{ファイルパス}`
- {実装ポイント1}
- {実装ポイント2}

## 完了条件

- [ ] {条件1}
- [ ] {条件2}

## 参考

- 仕様書: `.docs/plans/{仕様書名}.md`
```

## 注意事項

- タスクは依存関係を考慮し、順番に実装できるよう分解すること
- 1タスクは1セッションで完了できる粒度を目安にすること
- 共通で使用するコンポーネントやユーティリティは共通基盤タスクに含めること
